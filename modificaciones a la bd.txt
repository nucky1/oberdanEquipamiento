acordate de permitir el null



ALTER TABLE `cliente` ADD `nacionalidad` VARCHAR(50) NULL DEFAULT NULL AFTER `estadoCivil`;
ALTER TABLE `contactos` ADD `nombre` VARCHAR(50) NULL AFTER `contacto`;
ALTER TABLE `contactos` ADD `cargo` VARCHAR(50) NOT NULL AFTER `nombre`;
ALTER TABLE `proveedores`
  DROP `codPostal`;

CREATE TABLE `banco_proveedor` (
  `id` int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `nro_cuenta` varchar(50) NULL,
  `banco` varchar(50) NULL,
  `cbu` varchar(50) NULL,
  `alias` varchar(50) NULL,
  `tipo_cuenta` varchar(50) NULL,
  `proveedor_id` int(11) NOT NULL,
  FOREIGN KEY (`proveedor_id`) REFERENCES proveedores(id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

ALTER TABLE `localidad` ADD `codPostal` VARCHAR(20) NULL AFTER `provincia_id`;
ALTER TABLE `comercio`
  DROP `codPostal`;
ALTER TABLE `cliente`
  DROP `codPostal`
ALTER TABLE `empleado`
  DROP `codPostal 

ALTER TABLE `comercio` CHANGE `propietario` `esPropietario` TINYINT(1) NULL DEFAULT '0';

ALTER TABLE `comercio` ADD `esPropietario` INT NULL DEFAULT NULL AFTER `direIdemProp`;
-- SE CAMBIO LA FECHA MINIMA DE CREDITO Y DE ART_STOCK 1970-01-01 00:00:01

-- se vuelve a agregar el cobrador_id a credito
ALTER TABLE `credito` ADD `cobrador_id` INT NOT NULL DEFAULT '-1' AFTER `cuota_id`;
--
ALTER TABLE `comercio` ADD `dirIdemProp` INT NOT NULL AFTER `updated_at`;
ALTER TABLE `contactos` CHANGE `cargo` `cargo` VARCHAR(50) CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL;
ALTER TABLE `comercio` CHANGE `dirIdemProp` `direIdemProp` INT(11) NOT NULL;



CREATE TABLE `bd-oberdan`.`iva` ( `valor` FLOAT NOT NULL DEFAULT '1' UNIQUE ) ENGINE = InnoDB;
INSERT INTO iva (valor) VALUES (1.0);
INSERT INTO iva (valor) VALUES (21.0);    -- estas NO ESTAN EN LA OTRA BASE DE DATOS  
INSERT INTO iva (valor) VALUES (15.0)
-- modificaciones a renglon factura para poder soportar ivas mejor
ALTER TABLE `renglon_factura` ADD `ivaPorcentaje` INT NOT NULL DEFAULT '1' AFTER `cantidad`;
-- podria guardar ivaCosto, pero lo tomare como un atributo calculado.
--cambiar el iva de todos los articulos
-- a√±adiendo el coeficiente de ganancia a cada articulo:
ALTER TABLE `articulos` ADD `coeficiente` FLOAT NOT NULL DEFAULT '0' AFTER `precio_compra`;

--adding taxes to factura
ALTER TABLE `factura_proveedor` ADD `imp_interno_fijo` FLOAT NOT NULL DEFAULT '0' AFTER `tipo_factura`, ADD `imp_interno` FLOAT NOT NULL DEFAULT '0' AFTER `imp_interno_fijo`, 
ADD `sobretasa_iva` FLOAT NOT NULL DEFAULT '0' AFTER `imp_interno`, 
ADD `descuento_gral` FLOAT NOT NULL DEFAULT '0' AFTER `sobretasa_iva`;

-- estas Son las nuevas modificaciones: QUE EN ALGUNA BASE DE DATOS NO ESTAN! :@
ALTER TABLE `renglon_factura` ADD `descuento` FLOAT NOT NULL DEFAULT '0' AFTER `cantidad`;
ALTER TABLE `art_stock` CHANGE `stock_actual` `stock_actual` FLOAT NULL DEFAULT '0';
ALTER TABLE `art_stock`  FLOAT NULL DEFAULT '0', CHANGE `stock_pedido` `stock_pedido` FLOAT NULL DEFAULT '0', CHANGE `stock_reservado` `stock_reservado` FLOAT NULL DEFAULT '0';


-- tabla para el combo box de las zonas de los comercios
CREATE TABLE `bd-oberdan`.`zonas` ( `id` INT NOT NULL , `nombre` VARCHAR(50) NULL DEFAULT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;

ALTER TABLE `zonas` ADD `state` VARCHAR(10) NOT NULL DEFAULT 'ACTIVO' AFTER `nombre`;
ALTER TABLE `zonas` CHANGE `id` `id` INT(11) NOT NULL AUTO_INCREMENT;
ALTER TABLE `zonas` ADD UNIQUE(`nombre`);
ALTER TABLE `credito` DROP INDEX `credito_ibfk_3`; esto no lo toma por consola.

--cambiando el campo de zonas en comercio
ALTER TABLE `comercio` CHANGE `zona` `zona` INT(20) NULL DEFAULT NULL;
ALTER TABLE `comercio` CHANGE `zona` `zonaId` INT(20) NULL DEFAULT NULL;
INSERT INTO `zonas`( `nombre`) VALUES ('1')
INSERT INTO `zonas`( `nombre`) VALUES ('2')
ALTER TABLE `credito` CHANGE `zona` `zonaId` INT(10) NULL;

-- se agrega tabla para relacionar cliente con vendedor:

CREATE TABLE `bd-oberdan`.`cliente_vendedor` ( `id` INT NOT NULL AUTO_INCREMENT , `cliente_id` INT NOT NULL , `vendedor_id` INT NOT NULL , `fecha_inicio` DATE NOT NULL DEFAULT CURRENT_TIMESTAMP , `fecha_fin` DATE NULL DEFAULT NULL , `state` VARCHAR(10) NOT NULL DEFAULT '\'ACTIVO\'' , PRIMARY KEY (`id`)) ENGINE = InnoDB;

--se corrige el estado de la tabla cliente_vendedor
ALTER TABLE `cliente_vendedor` CHANGE `state` `state` VARCHAR(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'ACTIVO';


-- si no tiene esto, no puedo traer los empleados por defecto desde la base de datos cuando los busco completos
ALTER TABLE `empleado` CHANGE `direccion_id` `direccion_id` INT(11) NULL DEFAULT '1';
